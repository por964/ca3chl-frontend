(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{27:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(20),s=n.n(r),a=(n(27),n(11)),i=n(12),o=n(7),j=(n(28),n(1)),u=n.n(j),l=n(9),b=n.n(l),h=n(13),d="https://www.claesvonh.dk/ca3chl",f=d;function O(e){return e.ok?e.json():Promise.reject({status:e.status,fullError:e.json()})}var x=function(){var e=function(e){localStorage.setItem("jwtToken",e)},t=function(){return localStorage.getItem("jwtToken")},n=function(){var e=null!=t();return e},c=function(){var t=Object(h.a)(b.a.mark((function t(n,c){var r,s,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a("POST",!0,{username:n,password:c}),t.next=3,fetch(f+"/api/login",r);case 3:return s=t.sent,t.next=6,O(s);case 6:i=t.sent,e(i.token);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),r=function(){var e=Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("GET",!0),e.next=3,fetch(f+"/api/info/user",t);case 3:return n=e.sent,e.abrupt("return",O(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("GET",!0),e.next=3,fetch(f+"/api/info/admin",t);case 3:return n=e.sent,e.abrupt("return",O(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(e,c,r){var s={method:e,headers:{"Content-type":"application/json",Accept:"application/json",Origin:"*"}};return c&&n()&&(s.headers["x-access-token"]=t()),r&&(s.body=JSON.stringify(r)),s};return{makeOptions:a,setToken:e,getToken:t,loggedIn:n,login:c,logout:function(){localStorage.removeItem("jwtToken")},fetchUserData:r,fetchAdminData:s}}(),p=function(){var e=Object(j.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Dad joke:"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:n.joke1}),Object(c.jsxs)("li",{children:["Link: ",n.joke1Reference]})]}),Object(c.jsx)("h2",{children:"Chuck Norris joke:"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:n.joke2}),Object(c.jsxs)("li",{children:["Link: ",n.joke2Reference]})]}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{class:"btn btn-primary",onClick:function(){fetch(d+"/api/jokes/parallel").then((function(e){return e.json()})).then((function(e){r(e)}))},children:"Press for two new jokes"})]})},m=n(8);function v(e){var t=e.isLoggedin,n=e.loginMsg;return Object(c.jsxs)("ul",{className:"header",children:[Object(c.jsx)("li",{children:Object(c.jsx)(m.b,{exact:!0,activeClassName:"active",to:"/",children:"Home"})}),t&&Object(c.jsxs)(u.a.Fragment,{children:[Object(c.jsx)("li",{children:Object(c.jsx)(m.b,{activeClassName:"active",to:"/jokes",children:"Jokes"})}),Object(c.jsx)("li",{children:Object(c.jsx)(m.b,{activeClassName:"active",to:"/user-settings",children:"Admin "})}),Object(c.jsx)("li",{children:Object(c.jsx)(m.b,{activeClassName:"active",to:"/new-function",children:"New function "})}),Object(c.jsx)("li",{children:Object(c.jsx)(m.b,{activeClassName:"active",to:"/user-info",children:"User info "})})]}),Object(c.jsx)("li",{children:Object(c.jsxs)(m.b,{activeClassName:"active",to:"/login-out",children:[" ",n,"  "]})})]})}function g(){var e=Object(j.useState)("Loading..."),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(j.useEffect)((function(){x.fetchUserData().then((function(e){return r(e.msg)}))}),[]),Object(j.useEffect)((function(){x.fetchAdminData().then((function(e){return r(e.msg)}))}),[]),Object(c.jsx)("div",{children:Object(c.jsxs)("h2",{children:[n," "]})})}function k(e){return e.ok?e.json():Promise.reject({status:e.status,fullError:e.json()})}var w=function(){var e=function(){var e=Object(h.a)(b.a.mark((function e(n,c,r){var s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t("POST",{mail:c,telno:r}),e.next=3,fetch(d+"/api/info/"+n,s);case 3:return a=e.sent,e.abrupt("return",k(a));case 5:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),t=function(e,t){var n={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return t&&(n.body=JSON.stringify(t)),n};return{makeOptions:t,sendUpdate:e}}();function N(){var e=Object(j.useState)({user:"",mail:"",telno:""}),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(j.useState)(""),u=Object(o.a)(s,2),l=u[0],b=u[1],h=function(e,t,n){w.sendUpdate(e,t,n).then((function(e){})).catch((function(e){e.fullError.then((function(e){b(e.message),console.log("Error: ",l)}))}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Update your contact info"}),Object(c.jsxs)("form",{className:"col-sm-1",onChange:function(e){r(Object(i.a)(Object(i.a)({},n),{},Object(a.a)({},e.target.id,e.target.value)))},children:[Object(c.jsx)("input",{className:"form-control",placeholder:"UserID",id:"userid"}),Object(c.jsx)("input",{className:"form-control",placeholder:"Email",id:"mail"}),Object(c.jsx)("input",{className:"form-control",placeholder:"Phone no",id:"telno"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),h(n.userid,n.mail,n.telno)},children:"Send update"})]}),Object(c.jsx)("h2",{children:l})]})}var y=n(2);function C(e){var t=e.login,n=e.errorMessage,r=Object(j.useState)({username:"",password:""}),s=Object(o.a)(r,2),u=s[0],l=s[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Login"}),Object(c.jsxs)("form",{className:"col-sm-1",onChange:function(e){l(Object(i.a)(Object(i.a)({},u),{},Object(a.a)({},e.target.id,e.target.value)))},children:[Object(c.jsx)("input",{className:"form-control",placeholder:"User Name",id:"username"}),Object(c.jsx)("input",{className:"form-control",placeholder:"Password",id:"password"}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),t(u.username,u.password)},children:"Login"})]}),Object(c.jsx)("h2",{children:n})]})}function S(){return Object(c.jsx)("div",{children:Object(c.jsx)("h2",{children:"Home CHL app"})})}function E(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Two jokes"}),Object(c.jsx)(p,{})]})}var T=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h3",{children:"No match found for this."})})},L=function(){var e=Object(j.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(j.useState)(""),a=Object(o.a)(s,2),i=a[0],u=a[1];return Object(c.jsxs)("div",{className:"col-sm",children:[Object(c.jsx)(v,{loginMsg:n?"You are logged in":"Please log in",isLoggedin:n}),Object(c.jsxs)(y.c,{children:[Object(c.jsx)(y.a,{exact:!0,path:"/",children:Object(c.jsx)(S,{})}),Object(c.jsx)(y.a,{path:"/login-out",children:n?Object(c.jsxs)("div",{children:[Object(c.jsx)(g,{}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){x.logout(),r(!1)},children:"Logout"})]}):Object(c.jsx)(C,{errorMessage:i,setErrorMessage:u,login:function(e,t){x.login(e,t).then((function(e){r(!0)})).catch((function(e){e.fullError.then((function(e){u(e.message),console.log("Error: ",i)}))}))}})}),Object(c.jsx)(y.a,{path:"/user-info",children:Object(c.jsx)(N,{})}),Object(c.jsx)(y.a,{path:"/jokes",children:Object(c.jsx)(E,{})}),Object(c.jsx)(y.a,{path:"*",children:Object(c.jsx)(T,{})})]})]})},D=function(){return Object(c.jsx)(m.a,{children:Object(c.jsx)(L,{})})};s.a.render(Object(c.jsx)(D,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.bbb5028c.chunk.js.map